/*!
 * fullpage.js Parallax Effect Extension 0.1.4 for fullPage.js v3
 * https://github.com/alvarotrigo/fullPage.js
 *
 * @license This code has been bought from www.alvarotrigo.com/fullPage/extensions/ and it is not free to use or distribute.
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
window.fp_parallaxExtension=function(){var e,t,n,o,i,a,r,l,s,f,c=this,d=fp_utils,u=fp_utils.$,p=fullpage_api.getFullpageData(),v=p.options,m=p.internals,g=".fullpage-wrapper",x="active",h="."+x,E=".fp-section",b=E+h,S="fp-slide",y="."+S,L=y+h,w="fp-notransition",A=".fp-bg",M="reveal",R="cover",C="fp-parallax-stylesheet",N="fp-parallax-transitions",T="#"+N,I="fp-parallax-transition-class",z="#"+I,O=0,B=!1,H=!1,F=!0,k=!0,q=!1,W=!1,_=!1,V=!1,G=!1,X=!0===v.parallax||"slides"===v.parallax,Y=d.closest,D=d.addClass,P=d.removeClass,U=d.hasClass,$=d.css,j=d.nextAll,J=d.prevAll;function K(e){return{cover:{offsetNormal:e?0:t},reveal:{offsetNormal:e?-t:0}}}function Q(e){return{cover:{offsetNormal:e?0:n},reveal:{offsetNormal:e?-n:0}}}function Z(e){return e*o/100}function ee(e){return e*i/100}function te(){return window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth}function ne(){r&&ye(u(b).length?u(b)[0]:u(E)[0],0)}function oe(){var t=u(b).length?u(b)[0]:u(E)[0],n=e===M,o=n?j(t):J(t),i=n?J(t):j(t);o.forEach(function(t){ye(t,K(n)[e].offsetNormal,"silent")}),i.forEach(function(e){ye(e,0,"silent")}),X&&u(E).forEach(function(e){u(y,e).length&&ie(u(L,e).length?u(L,e)[0]:u(y,e)[0])})}function ie(t){var n=e===M,o=n?j(t):J(t),i=n?J(t):j(t);o.forEach(function(t){Le(t,Q(n)[e].offsetNormal,"silent")}),i.forEach(function(e){Le(e,0,"silent")})}function ae(e){var t=e.detail;i=te(),t&&!v.scrollBar?(me(),ge()):xe()}function re(e){c.destroy(),q=!1}function le(){var e=v.verticalCentered?".fp-tableCell":".fp-scrollable";u(e).forEach(function(e){var t=u(A,e)[0];u(".fp-scrollable",e).length&&null!=t&&d.prependTo(e.parentNode,t)})}function se(e){e.detail?xe():V=!0}function fe(e){e.detail,u(A).forEach(function(e){e.setAttribute("data-final-x",0),e.setAttribute("data-final-y",0)}),a=u(E),oe()}function ce(e){var t=e.detail;G=!0,ye(t,0,"silent");var n=u(y,t);n.length&&n.forEach(function(e){ye(e,0,"silent")}),H=!0}function de(e){var t=e.detail;c.afterSlideLoads(u(y,t)[0]),G=!1}function ue(e){var t=e.detail;W=!0,ie("left"===t.xMovement?u(y,u(b)[0])[0]:d.last(u(y,u(b)[0]))),setTimeout(function(){c.applyHorizontal(t)})}function pe(e){var t=e.detail;_=!0,oe(),setTimeout(function(){c.apply(t)})}function ve(){q&&(v.scrollBar||!v.autoScrolling||m.usingExtension("dragAndMove"))&&function(){var n=m.usingExtension("dragAndMove")?Math.abs(window.fp_dragAndMoveExtension.getCurrentScroll()):d.getScrollTop(),i=O>n,r=d.index(u(b)[0],E),l=o+n;O=n;for(var s=0;s<a.length;++s){var f=a[s],c=o+f.offsetTop;!i&&f.offsetTop<=l?r=s:i&&c>=n&&f.offsetTop<n&&a.length>s+1&&(r=s+1)}var p=(o-(a[r].offsetTop-n))*t/o;e!==M&&(r-=1);var v=e!==M?p:-t+p;r>-1&&ye(u(E)[r],v),r-1>=0&&ye(a[r-1],K(!1)[e].offsetNormal),void 0!==a[r+1]&&ye(a[r+1],K(!0)[e].offsetNormal)}()}function me(){var e=".fp-bg{transition: transform "+v.scrollingSpeed+"ms "+v.easingcss3+";}.fp-slide, .fp-section{transition: background-position "+v.scrollingSpeed+"ms "+v.easingcss3+";}";v.autoScrolling&&!v.scrollBar&&we(N,e)}function ge(){var e=".fp-bg-animate{ transition: all "+v.scrollingSpeed+"ms "+v.easingcss3+"}";we(I,e)}function xe(){d.remove(u(T))}function he(){clearTimeout(f),f=setTimeout(Ee,350)}function Ee(){o=d.getWindowHeight(),i=te(),t=Z(v.parallaxOptions.percentage),n=ee(v.parallaxOptions.percentage),ne(),oe(),be()}function be(){$(u(A),{height:o+"px"})}function Se(e){return Math.round(2*e)/2}function ye(e,t,n){var o=Se(t),i=u(y,e);if(i.length){var a=u(L,e)[0];e=null!=a?a:i[0]}if(r)$(e,{"background-position-y":o+"px"});else if(!U(e,S)||U(e,x)||void 0!==n){var l=u(A,e)[0];if(l){var s=null!=l.getAttribute("data-final-x")?l.getAttribute("data-final-x"):0;d.toggleClass(l,w,void 0!==n),$(l,{transform:"translateX("+s+"px) translateY("+o+"px)"}),l.setAttribute("data-final-x",s),l.setAttribute("data-final-y",o)}}}function Le(e,t,n){var o=Se(t),i=r?e:u(A,e)[0];if(i)if(!v.scrollBar&&v.autoScrolling||D(i,"fp-bg-animate"),r)d.toggleClass(i,w,void 0!==n),$(i,{"background-position-x":o+"px"});else{var a=0,l=i.getAttribute("data-final-y");"none"!==l&&null!=l&&(a=l),d.toggleClass(i,w,void 0!==n||G),$(i,{transform:"translateX("+o+"px) translateY("+a+"px)"}),i.setAttribute("data-final-x",o),i.setAttribute("data-final-y",a)}}function we(e,t){if(!u("#"+e).length){var n=document.head||document.getElementsByTagName("head")[0];d.appendTo((o=e,i=t,(a=document.createElement("style")).type="text/css",a.id=o,a.styleSheet?a.styleSheet.cssText=i:a.appendChild(document.createTextNode(i)),a),n)}var o,i,a}s=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.requestAnimationFrame=s,c.apply=function(t){if(V&&me(),!t.localIsResizing&&!v.scrollBar&&v.autoScrolling)if(("up"===t.yMovement||t.sectionIndex)&&(!t.isMovementUp||t.leavingSection-1)||!v.continuousVertical||_){var n=K(B="up"===t.yMovement)[e].offsetNormal;ye(u(E)[t.sectionIndex],0),ye(u(E)[t.leavingSection-1],n),F=1===Math.abs(t.leavingSection-1-t.sectionIndex);for(var o=Math.min(t.leavingSection-1,t.sectionIndex)+1;o<Math.max(t.leavingSection-1,t.sectionIndex);o++)ye(u(E)[o],0,"silent")}else;},c.applyHorizontal=function(t){if(X&&(!t.localIsResizing||G)&&"none"!=t.xMovement)if((l=void 0!==t.direction&&t.direction!==t.xMovement)&&v.continuousHorizontal&&!W)l=!1;else{var n=Q(H=l?"left"===t.direction:"left"===t.xMovement)[e].offsetNormal;if(Le(u(y,t.section)[t.slideIndex],0),Le(u(y,t.section)[t.prevSlideIndex],n),!(k=1===Math.abs(t.slideIndex-t.prevSlideIndex))&&!G)for(var o=Math.min(t.slideIndex,t.prevSlideIndex)+1;o<Math.max(t.slideIndex,t.prevSlideIndex);o++)Le(u(y,t.section)[o],0,"silent")}},c.init=function(){var l;o=d.getWindowHeight(),i=te(),e=v.parallaxOptions.type,t=Z(v.parallaxOptions.percentage),n=ee(v.parallaxOptions.percentage),a=u(v.sectionSelector),r="background"===v.parallaxOptions.property,be(),(l=u(g)[0]).addEventListener("setAutoScrolling",ae),l.addEventListener("destroy",re),l.addEventListener("onScroll",ve),l.addEventListener("afterResponsive",fe),l.addEventListener("onGrab",se),l.addEventListener("onContinuousVertical",pe),l.addEventListener("onResize",he),l.addEventListener("afterRender",le),l.addEventListener("afterRebuild",le),l.addEventListener("onResetSliders",ce),X&&(l.addEventListener("onContinuosHorizontal",ue),l.addEventListener("onEndResetSliders",de)),r||(we(C,".fp-bg{top:0;bottom:0;width: 100%;position:absolute;z-index: -1;}.fp-section, .fp-slide, .fp-section.fp-table, .fp-slide.fp-table, .fp-section .fp-tableCell, .fp-slide .fp-tableCell {position:relative;overflow: hidden;}"),me()),ge(),ne(),oe(),q=!0},c.destroy=function(){xe(),d.remove(u(z)),t=Z(0),n=ee(0),oe(),d.css(u(A),{height:""}),clearTimeout(f);var e=u(g)[0];e.removeEventListener("setAutoScrolling",ae),e.removeEventListener("destroy",re),e.removeEventListener("onScroll",ve),e.removeEventListener("afterResponsive",fe),e.removeEventListener("onGrab",se),e.removeEventListener("onContinuousVertical",pe),e.removeEventListener("onResize",he),e.removeEventListener("afterRender",le),e.removeEventListener("afterRebuild",le),e.removeEventListener("onResetSliders",ce),X&&(e.removeEventListener("onContinuosHorizontal",ue),e.removeEventListener("onEndResetSliders",de))},c.setOption=function(o,i){"offset"===o?(v.parallaxOptions.percentage=i,t=Z(i),n=ee(i)):"type"===o&&(v.parallaxOptions.type=i,e=i),oe()},c.applyProperties=ye,c.afterSlideLoads=function(t){var n,o=void 0!==t?t:u(L,u(b)[0])[0],i=Y(o,E);if((r?(n=i,u(y,n).length?u(y,n):[n]):u(A,i)).forEach(function(e){P(e,"fp-bg-animate")}),(W||l)&&(ie(o),W=!1),!k){var a=Q(H)[e].offsetNormal,s=o,f=H?j(s):J(s);(e===M&&H||e===R&&!H||G)&&f.forEach(function(e){Le(e,a,"silent")})}},c.afterLoad=function(){if((!v.scrollBar||!v.autoScrolling||m.usingExtension("dragAndMove"))&&((_||l)&&(oe(),_=!1),!F)){var t=K(B)[e].offsetNormal,n=B?j(u(b)[0]):J(u(b)[0]);(e===M&&B||e===R&&!B)&&n.forEach(function(e){ye(e,t,"silent")})}},c.c=m.c;var Ae=c["common".charAt(0)];return"complete"===document.readyState&&Ae("parallax"),window.addEventListener("load",function(){Ae("parallax")}),c};